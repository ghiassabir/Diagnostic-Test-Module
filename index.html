// In quiz.html's script.js
if (submitEmailBtn) {
    submitEmailBtn.addEventListener('click', () => { 
        console.log("DEBUG: Fallback email prompt's Continue button clicked.");
        if (studentEmailField && studentEmailField.value.trim() !== "" && studentEmailField.value.includes('@')) {
            studentEmailForSubmission = studentEmailField.value.trim();
            localStorage.setItem('bluebookStudentEmail', studentEmailForSubmission);
            console.log(`DEBUG submitEmailBtn: Email submitted and saved: ${studentEmailForSubmission}`);
            
            // Disable the button to prevent multiple clicks and provide feedback
            submitEmailBtn.disabled = true;
            submitEmailBtn.textContent = 'Processing...';

            startAppOrQuiz(); // Call the main logic function

        } else {
            alert("Please enter a valid email address.");
            // Re-enable button if input was invalid
            submitEmailBtn.disabled = false;
            submitEmailBtn.textContent = 'Continue';
        }
    });
}
